From 8e91360a01583d76f7582fc2b4569313b92f8a0e Mon Sep 17 00:00:00 2001
From: Koen Kooi <koen@dominion.thruhere.net>
Date: Sun, 16 Sep 2012 11:48:18 +0200
Subject: [PATCH 9/9] beaglebone-3.6: enable EHRPWM1A backlight for st7735fb

Signed-off-by: Koen Kooi <koen@dominion.thruhere.net>
---
 arch/arm/boot/dts/am335x-bone.dts |    9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index 0b53cff..8e6ae10 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -39,6 +39,7 @@
 				0x194 0x33	/* mcasp0_fsx.spi1_d0, INPUT_PULLUP | MODE3 */
 				0x198 0x13	/* mcasp0_axr0.spi1_d1, OUTPUT_PULLUP | MODE3 */
 				0x19c 0x13	/* mcasp0_ahclkr.spi1_cs0, OUTPUT_PULLUP | MODE3 */
+				0x48 0x6        /* gpmc_a2.ehrpwm1A, MODE6 */
 			>;
 		};
 		lcd_pins: pinmux_lcd_pins {
@@ -96,6 +97,14 @@
 
 		};
 	};
+
+	backlight {
+			compatible	= "pwm-backlight";
+			pwms = <&ehrpwm1 0 500000 0>;
+			pwm-names = "st7735fb";
+			brightness-levels = <0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100>;
+			default-brightness-level = <50>; /* index to the array above */
+		};
 };
 
 /include/ "tps65217.dtsi"
-- 
1.7.10.4

