From c142eadd094d27257440338a49ccaf9f4b52eb07 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Sat, 31 Mar 2012 20:49:45 -0500
Subject: [PATCH] ulcd: fix ulcd struct

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/mach-omap2/board-omap3beagle.c |   29 +++++++++++++++--------------
 1 files changed, 15 insertions(+), 14 deletions(-)

diff --git a/arch/arm/mach-omap2/board-omap3beagle.c b/arch/arm/mach-omap2/board-omap3beagle.c
index 0230dd1..fc0414c 100644
--- a/arch/arm/mach-omap2/board-omap3beagle.c
+++ b/arch/arm/mach-omap2/board-omap3beagle.c
@@ -556,11 +556,26 @@ static struct i2c_board_info __initdata beagle_i2c2_boardinfo[] = {};
 	( defined(CONFIG_TOUCHSCREEN_TSC2007) || defined(CONFIG_TOUCHSCREEN_TSC2007_MODULE))
 /* Touchscreen */
 #define OMAP3BEAGLE_TSC2007_GPIO 157
+
 static int omap3beagle_tsc2007_get_pendown_state(void)
 {
 	return !gpio_get_value(OMAP3BEAGLE_TSC2007_GPIO);
 }
 
+static struct tsc2007_platform_data tsc2007_info = {
+	.model = 2007,
+	.x_plate_ohms = 180,
+	.get_pendown_state = omap3beagle_tsc2007_get_pendown_state,
+};
+
+static struct i2c_board_info __initdata beagle_i2c2_bbtoys_ulcd[] __initdata = {
+	{
+		I2C_BOARD_INFO("tlc59108", 0x40),
+		I2C_BOARD_INFO("tsc2007", 0x48),
+		.platform_data = &tsc2007_info,
+	},
+};
+
 static void __init omap3beagle_tsc2007_init(void)
 {
 	int r;
@@ -577,20 +592,6 @@ static void __init omap3beagle_tsc2007_init(void)
 	beagle_i2c2_bbtoys_ulcd[0].irq = gpio_to_irq(OMAP3BEAGLE_TSC2007_GPIO);
 	irq_set_irq_type(gpio_to_irq(OMAP3BEAGLE_TSC2007_GPIO), IRQ_TYPE_EDGE_FALLING);
 }
-
-static struct tsc2007_platform_data tsc2007_info = {
-	.model = 2007,
-	.x_plate_ohms = 180,
-	.get_pendown_state = omap3beagle_tsc2007_get_pendown_state,
-};
-
-static struct i2c_board_info __initdata beagle_i2c2_bbtoys_ulcd[] = {
-	{
-		I2C_BOARD_INFO("tlc59108", 0x40),
-		I2C_BOARD_INFO("tsc2007", 0x48),
-		.platform_data = &tsc2007_info,
-	},
-};
 #else
 static struct i2c_board_info __initdata beagle_i2c2_bbtoys_ulcd[] = {};
 static void __init omap3beagle_tsc2007_init(void) { return; }
-- 
1.7.9.1

