From dcadb9cc544c8477edae3fd2ee4cff085eae51f9 Mon Sep 17 00:00:00 2001
From: Matt Porter <mporter@ti.com>
Date: Fri, 21 Sep 2012 12:33:14 -0400
Subject: [PATCH 3/4] ARM: dts: AM33xx PRUSS support

Adds a pruss node and an example of use on Beaglebone.

Signed-off-by: Matt Porter <mporter@ti.com>
---
 arch/arm/boot/dts/am335x-bone.dts |   11 +++++++++++
 arch/arm/boot/dts/am33xx.dtsi     |   11 +++++++++++
 2 files changed, 22 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-bone.dts b/arch/arm/boot/dts/am335x-bone.dts
index ed1c051..a12d0a4 100644
--- a/arch/arm/boot/dts/am335x-bone.dts
+++ b/arch/arm/boot/dts/am335x-bone.dts
@@ -54,6 +54,11 @@
 				0x17c 0x73	/* uart1_rtsn.i2c2_scl, SLEWCTRL_SLOW | INPUT_PULLUP | MODE3 */
 			>;
 		};
+		pruss_led_pins: pinmux_pruss_led_pins {
+			pinctrl-single,pins = <
+				0x0a0 0x15	/* lcd_data0.pr1_pru1_pru_r30_0, OUTPUT_PULLUP | MODE5 */
+			>;
+		};
 	};
 
 	ocp {
@@ -230,3 +235,9 @@
 		};
 	};
 };
+
+&pruss {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&pruss_led_pins>;
+};
diff --git a/arch/arm/boot/dts/am33xx.dtsi b/arch/arm/boot/dts/am33xx.dtsi
index 2e4499c..f33fcc2 100644
--- a/arch/arm/boot/dts/am33xx.dtsi
+++ b/arch/arm/boot/dts/am33xx.dtsi
@@ -397,5 +397,16 @@
 			#pwm-cells = <3>;
 			has_configspace = <1>;
 		};
+
+		pruss: pruss@4a300000 {
+			compatible = "ti,pruss-v2";
+			ti,hwmods = "pruss";
+			reg = <0x4a300000 0x080000>;
+			ti,pintc-offset = <0x20000>;
+			interrupt-parent = <&intc>;
+			interrupts = <20 21 22 23 24 25 26 27>;
+			status = "disabled";
+		};
+
 	};
 };
-- 
1.7.10.4

